import pandas as pd
from datetime import datetime
from pathlib import Path
DATA_FILE = Path("wellness_data.csv")
if DATA_FILE.exists():
    data = pd.read_csv(DATA_FILE, parse_dates=["Date"])
else:
    data = pd.DataFrame(columns=["Date", "Sleep Hours", "Mood", "Exercise Minutes"])
data["Date"] = pd.to_datetime(data["Date"], errors='coerce')
def log_data(sleep_hours: float, mood: float, exercise_minutes: float):
    global data
    today = pd.to_datetime(datetime.today().date())
    if not (0 <= sleep_hours <= 24):
        raise ValueError("Sleep hours must be between 0 and 24.")
    if not (1 <= mood <= 10):
        raise ValueError("Mood must be between 1 and 10.")
    if not (0 <= exercise_minutes <= 1440):
        raise ValueError("Exercise minutes must be between 0 and 1440.")
    new_entry = {
        "Date": today,
        "Sleep Hours": sleep_hours,
        "Mood": mood,
        "Exercise Minutes": exercise_minutes
    }
    if today.date() in data["Date"].dt.date.values:
        print("ðŸ”„ Today's entry already exists. Overwriting...")
        data = data[data["Date"].dt.date != today.date()]

    data = pd.concat([data, pd.DataFrame([new_entry])], ignore_index=True)
    data = data.sort_values("Date")
    data.to_csv(DATA_FILE, index=False)
    print("âœ… Data logged and saved successfully!")
import matplotlib.pyplot as plt
import pandas as pd
def visualize_data(data: pd.DataFrame, save_plot: bool = False):
    if data.empty:
        print("âš ï¸ No data to visualize.")
        return
    df = data.sort_values("Date")
    df["Date"] = pd.to_datetime(df["Date"])
    df.set_index("Date", inplace=True)
    df = df.sort_index()
    df_rolling = df.rolling(window=3, min_periods=1).mean()
    plt.figure(figsize=(12, 10))
    plt.subplot(3, 1, 1)
    plt.plot(df.index, df["Sleep Hours"], 'o-', label="Sleep Hours", color="blue")
    plt.plot(df_rolling.index, df_rolling["Sleep Hours"], '--', color="cyan", label="3-Day Avg")
    plt.title("Sleep Hours Over Time")
    plt.ylabel("Hours")
    plt.legend()
    plt.grid(True)
    plt.subplot(3, 1, 2)
    plt.plot(df.index, df["Mood"], 'o-', label="Mood", color="green")
    plt.plot(df_rolling.index, df_rolling["Mood"], '--', color="lime", label="3-Day Avg")
    plt.title("Mood Over Time")
    plt.ylabel("Mood Level")
    plt.legend()
    plt.grid(True)
    plt.subplot(3, 1, 3)
    plt.plot(df.index, df["Exercise Minutes"], 'o-', label="Exercise", color="red")
    plt.plot(df_rolling.index, df_rolling["Exercise Minutes"], '--', color="orange", label="3-Day Avg")
    plt.title("Exercise Minutes Over Time")
    plt.xlabel("Date")
    plt.ylabel("Minutes")
    plt.legend()
    plt.grid(True)
    plt.tight_layout()
    plt.xticks(rotation=45)
    if save_plot:
        plt.savefig("wellness_plot.png")
        print("ðŸ“¸ Plot saved as 'wellness_plot.png'.")
    plt.show()
def main():
    print("ðŸ“Š Welcome to the Wellness Tracker!")
    while True:
        try:
            sleep_hours = float(input("ðŸ›Œ Enter sleep hours for today (0-24): "))
            mood = float(input("ðŸ™‚ Enter your mood (1-10): "))
            exercise_minutes = float(input("ðŸƒâ€â™€ï¸ Enter exercise minutes (0-1440): "))
            log_data(sleep_hours, mood, exercise_minutes)
        except ValueError as ve:
            print(f"âŒ {ve}")
            continue
        while True:
            action = input(
                "\nType 'visualize' to view graphs, 'save' to save plot, 'continue' to log another day, or 'exit' to quit: "
            ).strip().lower()
            if action == "visualize":
                visualize_data(data)
            elif action == "save":
                visualize_data(data, save_plot=True)
            elif action == "continue":
                break
            elif action == "exit":
                print("ðŸ‘‹ Exiting Wellness Tracker. Stay consistent and healthy!")
                return
            else:
                print("âš ï¸ Invalid input. Please try again.")
if __name__ == "__main__":
    main()
